"use strict";(self.webpackChunkcurrency_calculator=self.webpackChunkcurrency_calculator||[]).push([["main"],{7398:(g,x,a)=>{var m=a(5427),e=a(3668),C=a(4522),S=a(3485);const F=new e.OlP("BASE_URL");let B=(()=>{class t{constructor(r){this.baseUrl=r}intercept(r,c){return r.url.startsWith("/")&&(r=r.clone({url:this.baseUrl+r.url})),c.handle(r)}}return t.\u0275fac=function(r){return new(r||t)(e.LFG(F))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const f=Object.assign(Object.assign({},{BASE_URL:"https://api.currencyfreaks.com",CURRENCY_FREAKS_API_KEY:"b51102e92b9c4d10a5f3761598b2c9ba",APP_INFO:{name:"Currency calculator"}}),{production:!0});var N=a(2997),E=a(8314),P=a(4753),Z=a(7384),l=(()=>{return(t=l||(l={})).USDRUB="USDRUB",t.USDEUR="USDEUR",t.USDGBP="USDGBP",t.USDJPY="USDJPY",l;var t})();const v={RUB:"rubles",EUR:"euros",GBP:"pounds",JPY:"yens",USD:"US dollars"};let $=(()=>{class t{constructor(r){this.http=r}loadCurrencyPairsRates(r){const c=this.getCurrencyPairsRatesFromStorage();return c?(Date.now()-c.date)/1e3>3600?this.loadCurrencyPairsRatesFromAPI(r):(0,N.of)(c.currencyPairsRates):this.loadCurrencyPairsRatesFromAPI(r)}loadCurrencyPairsRatesFromAPI(r){return this.http.get("/latest",{params:{apikey:f.CURRENCY_FREAKS_API_KEY}}).pipe((0,E.j)("rates"),(0,P.U)(c=>r.reduce((s,u)=>Object.assign(Object.assign({},s),{[`USD${u}`]:+c[u]}),{})),(0,Z.b)(c=>this.saveCurrencyPairsRatesToStorage(c)))}saveCurrencyPairsRatesToStorage(r){localStorage.setItem("currencyPairsRates",JSON.stringify({currencyPairsRates:r,date:Date.now()}))}getCurrencyPairsRatesFromStorage(){const r=localStorage.getItem("currencyPairsRates");return r?JSON.parse(r):null}}return t.\u0275fac=function(r){return new(r||t)(e.LFG(C.eN))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var p=(()=>{return(t=p||(p={})).RUB="RUB",t.EUR="EUR",t.USD="USD",t.JPY="JPY",t.GBP="GBP",p;var t})(),o=a(3010);const R=(0,o.PH)("[Cart] Load Selected Cart",(0,o.Ky)()),T=(0,o.PH)("[Cart] Load Selected Cart Success",(0,o.Ky)()),b=(0,o.PH)("[Cart] Set Active Currency",(0,o.Ky)()),h=(0,o.PH)("[Cart] Load Currency Pairs Rates",(0,o.Ky)()),U=(0,o.PH)("[Cart] Load Currency Pairs Rates Success",(0,o.Ky)());var M=a(2808),i=(()=>{return(t=i||(i={})).UNINITIALIZED="uninitialized",t.LOADING="loading",t.LOADED="loaded",t.SAVING="saving",t.DELETING="deleting",t.FAILED="failed",i;var t})();const D=(0,M.H)({selectId:t=>t.uuid,sortComparer:function(t,n){return new Date(n.createdAt).getTime()-new Date(t.createdAt).getTime()}}),Y=(0,o.Lq)({activeCurrency:p.USD,currencyPairsRates:{},statusCurrencyPairsRate:i.UNINITIALIZED,error:null,ids:[],entities:{}},(0,o.on)(T,(t,{products:n})=>D.addMany(n,t)),(0,o.on)(b,(t,{activeCurrency:n})=>Object.assign(Object.assign({},t),{activeCurrency:n})),(0,o.on)(h,t=>Object.assign(Object.assign({},t),{statusCurrencyPairsRate:i.LOADING})),(0,o.on)(U,(t,{currencyPairsRates:n})=>Object.assign(Object.assign({},t),{currencyPairsRates:n,statusCurrencyPairsRate:i.LOADED})));function G(t,n){return Y(t,n)}const{selectAll:J}=D.getSelectors(),_=(0,o.ZF)("cart"),w=(0,o.P1)(_,J),K=(0,o.P1)(w,t=>t.reduce((n,r)=>n+r.price,0)),Q=(0,o.P1)(_,t=>t.activeCurrency),z=(0,o.P1)(_,t=>t.currencyPairsRates);let H=(()=>{class t{constructor(r){this.store$=r,this.products$=this.store$.pipe((0,o.Ys)(w)),this.totalProductsPrice$=this.store$.pipe((0,o.Ys)(K)),this.activeCurrency$=this.store$.pipe((0,o.Ys)(Q)),this.currencyPairsRates$=this.store$.pipe((0,o.Ys)(z)),this.store$.dispatch(R({data:[{price:20},{price:45},{price:67},{price:1035}]})),this.store$.dispatch(h({pairs:["RUB","EUR","GBP","JPY"]}))}setActiveCurrency(r){this.store$.dispatch(b({activeCurrency:r}))}}return t.\u0275fac=function(r){return new(r||t)(e.LFG(o.yh))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var A=a(1369),y=a(6019);let I=(()=>{class t{transform(r){return null===r?"":r&&r.replace(/([\d.])+/g,"")}}return t.\u0275fac=function(r){return new(r||t)},t.\u0275pipe=e.Yjl({name:"currencySymbol",type:t,pure:!0}),t})(),X=(()=>{class t{constructor(){this.currencyType=p.USD}}return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["cc-currency-symbol"]],inputs:{currencyType:"currencyType"},decls:3,vars:7,template:function(r,c){1&r&&(e._uU(0),e.ALo(1,"currencySymbol"),e.ALo(2,"currency")),2&r&&e.hij("",e.lcZ(1,1,e.Dn7(2,3,0,c.currencyType,"symbol-narrow")),"\n")},pipes:[I,y.H9],styles:["[_nghost-%COMP%]{display:inline-block;vertical-align:top}"],changeDetection:0}),t})(),W=(()=>{class t{constructor(){this.currency=p.USD,this.isActive=!1,this.setActiveCurrency=new e.vpe}}return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["cc-currency-button"]],inputs:{currency:"currency",isActive:"isActive"},outputs:{setActiveCurrency:"setActiveCurrency"},decls:3,vars:4,consts:[["type","button",1,"btn",3,"click"],[3,"currencyType"],[1,"btn__text",3,"innerText"]],template:function(r,c){1&r&&(e.TgZ(0,"button",0),e.NdJ("click",function(){return c.setActiveCurrency.emit(c.currency)}),e._UZ(1,"cc-currency-symbol",1),e._UZ(2,"span",2),e.qZA()),2&r&&(e.ekj("btn_active",c.isActive),e.xp6(1),e.Q6J("currencyType",c.currency),e.xp6(1),e.Q6J("innerText",c.currency))},directives:[X],styles:["[_nghost-%COMP%]{display:inline-block;vertical-align:top;margin-top:8px;margin-left:8px}.btn[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;width:75px;height:75px;border-radius:8px;color:var(--primary);font-size:20px;box-shadow:0 2px 10px rgba(var(--black-rgb),.100524);transition:var(--time) all}.btn[_ngcontent-%COMP%]:hover, .btn_active[_ngcontent-%COMP%]{color:var(--picton-blue);background:var(--link-water)}.btn__text[_ngcontent-%COMP%]{font-size:12px;padding-top:7px}"],changeDetection:0}),t})(),O=(()=>{class t{constructor(r,c){if(this.ngFor=r,this.viewContainerRef=c,this.ngForTrackByKey="",!r)throw new Error("trackByKey should use with *ngFor!")}ngOnChanges(r){if("ngForTrackByKey"in r){const c=this.ngForTrackByKey;c&&(this.ngFor.ngForTrackBy=(s,u)=>u[c]),this.ngFor._differ=null,this.ngFor._ngForOfDirty=!0,this.viewContainerRef.clear(),this.ngFor.ngDoCheck()}}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(y.sg,9),e.Y36(e.s_b))},t.\u0275dir=e.lG2({type:t,selectors:[["","ngForTrackByKey",""]],inputs:{ngForTrackByKey:"ngForTrackByKey"},features:[e.TTD]}),t})(),L=(()=>{class t{transform(r,c){return{rubles:r*c[l.USDRUB],euros:r*c[l.USDEUR],"US dollars":r,pounds:r*c[l.USDGBP],yens:r*c[l.USDJPY]}}}return t.\u0275fac=function(r){return new(r||t)},t.\u0275pipe=e.Yjl({name:"priceInfo",type:t,pure:!0}),t})(),V=(()=>{class t{constructor(){this.currencyPairsNames=v}}return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["cc-total-price"]],inputs:{totalProductsPrice:"totalProductsPrice",currencyPairsRates:"currencyPairsRates",activeCurrency:"activeCurrency"},decls:3,vars:8,template:function(r,c){1&r&&(e._uU(0),e.ALo(1,"currency"),e.ALo(2,"priceInfo")),2&r&&e.hij("Total:\n",e.Dn7(1,1,e.xi3(2,5,c.totalProductsPrice,c.currencyPairsRates)[c.currencyPairsNames[c.activeCurrency]],c.activeCurrency,"symbol-narrow"),"\n")},pipes:[y.H9,L],styles:["[_nghost-%COMP%]{font-style:normal;font-weight:bold;font-size:16px;line-height:18px;color:var(--primary);padding:17px 0 3px;text-align:center}"],changeDetection:0}),t})(),q=(()=>{class t{constructor(){this.currencyPairsNames=v}}return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["cc-product"]],inputs:{product:"product",currencyPairsRates:"currencyPairsRates",activeCurrency:"activeCurrency"},decls:8,vars:10,consts:[[1,"product"],["alt","product-image",1,"product__img",3,"src"],[1,"product__info"],[1,"product__name",3,"innerText"],[1,"product__price"]],template:function(r,c){1&r&&(e.TgZ(0,"div",0),e._UZ(1,"img",1),e.TgZ(2,"div",2),e._UZ(3,"span",3),e.TgZ(4,"span",4),e._uU(5),e.ALo(6,"currency"),e.ALo(7,"priceInfo"),e.qZA(),e.qZA(),e.qZA()),2&r&&(e.xp6(1),e.Q6J("src",c.product.image,e.LSH),e.xp6(2),e.Q6J("innerText",c.product.name),e.xp6(2),e.hij(" ",e.Dn7(6,3,e.xi3(7,7,c.product.price,c.currencyPairsRates)[c.currencyPairsNames[c.activeCurrency]],c.activeCurrency,"symbol-narrow")," "))},pipes:[y.H9,L],styles:[".product[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:12px 12px 10px;box-shadow:0 2px 10px rgba(var(--black-rgb),.100524);width:240px;margin-left:10px;color:var(--primary)}.product__info[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding-top:12px;white-space:nowrap}.product__name[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;padding-right:5px}.product__price[_ngcontent-%COMP%]{font-weight:700}"],changeDetection:0}),t})();function tt(t,n){if(1&t){const r=e.EpF();e.TgZ(0,"li",5),e.TgZ(1,"cc-currency-button",6),e.NdJ("setActiveCurrency",function(s){return e.CHM(r),e.oxw(2).setActiveCurrency(s)}),e.qZA(),e.qZA()}if(2&t){const r=n.$implicit,c=e.oxw().$implicit;e.xp6(1),e.Q6J("currency",r.value)("isActive",r.value===c)}}function et(t,n){if(1&t&&(e.ynx(0),e._UZ(1,"cc-product",10),e.BQk()),2&t){const r=n.$implicit,c=e.oxw().$implicit,s=e.oxw().$implicit;e.xp6(1),e.Q6J("product",r)("currencyPairsRates",c)("activeCurrency",s)}}function rt(t,n){if(1&t&&(e.ynx(0),e.TgZ(1,"div",7),e.YNc(2,et,2,3,"ng-container",8),e.ALo(3,"ngrxPush"),e.qZA(),e._UZ(4,"cc-total-price",9),e.ALo(5,"ngrxPush"),e.BQk()),2&t){const r=n.$implicit,c=e.oxw().$implicit,s=e.oxw();e.xp6(2),e.Q6J("ngForOf",e.lcZ(3,5,s.products$))("ngForTrackByKey","uuid"),e.xp6(2),e.Q6J("totalProductsPrice",e.lcZ(5,7,s.totalProductsPrice$))("currencyPairsRates",r)("activeCurrency",c)}}function nt(t,n){if(1&t&&(e.ynx(0),e.TgZ(1,"div",1),e.TgZ(2,"h2",2),e._uU(3,"Choose currency:"),e.qZA(),e.TgZ(4,"ul",3),e.YNc(5,tt,2,2,"li",4),e.ALo(6,"keyvalue"),e.qZA(),e.qZA(),e.YNc(7,rt,6,9,"ng-container",0),e.BQk()),2&t){const r=e.oxw();e.xp6(5),e.Q6J("ngForOf",e.lcZ(6,2,r.currencies)),e.xp6(2),e.Q6J("ngrxLet",r.currencyPairsRates$)}}let ct=(()=>{class t{constructor(r){this.cartFacade=r,this.currencyPairsNames=v,this.currencies=p,this.products$=this.cartFacade.products$,this.totalProductsPrice$=this.cartFacade.totalProductsPrice$,this.activeCurrency$=this.cartFacade.activeCurrency$,this.currencyPairsRates$=this.cartFacade.currencyPairsRates$}setActiveCurrency(r){this.cartFacade.setActiveCurrency(r)}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(H))},t.\u0275cmp=e.Xpm({type:t,selectors:[["cc-cart"]],decls:1,vars:1,consts:[[4,"ngrxLet"],[1,"languages"],[1,"languages__title"],[1,"languages__list"],["class","languages__list-item",4,"ngFor","ngForOf"],[1,"languages__list-item"],[3,"currency","isActive","setActiveCurrency"],[1,"product-list"],[4,"ngFor","ngForOf","ngForTrackByKey"],[3,"totalProductsPrice","currencyPairsRates","activeCurrency"],[3,"product","currencyPairsRates","activeCurrency"]],template:function(r,c){1&r&&e.YNc(0,nt,8,4,"ng-container",0),2&r&&e.Q6J("ngrxLet",c.activeCurrency$)},directives:[A.eJ,y.sg,W,O,V,q],pipes:[y.Nd,A.fM],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:100%;padding-bottom:15px}.languages[_ngcontent-%COMP%]{max-width:512px;width:100%;margin:0 auto;display:flex;flex-direction:column;align-items:center;justify-content:space-between;padding:20px 5px 20px 0}.languages__title[_ngcontent-%COMP%]{font-style:normal;font-weight:bold;font-size:16px;line-height:18px;color:var(--primary);padding-bottom:3px}.languages__list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center;justify-content:center}.product-list[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:center;flex-wrap:wrap}"],changeDetection:0}),t})();var d=a(4834),ot=a(6234);let it=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["cc-root"]],decls:1,vars:0,template:function(r,c){1&r&&e._UZ(0,"router-outlet")},directives:[S.lC],styles:["[_nghost-%COMP%]{height:100%}"],changeDetection:0}),t})();var at=a(8546),st=a(5724);let ut=(()=>{class t{constructor(r,c){this.actions$=r,this.cartService=c,this.loadSelectedCart$=(0,d.GW)(()=>this.actions$.pipe((0,d.l4)(R),(0,P.U)(({data:s})=>T({products:s.map((u,gt)=>this.createProduct(u,gt))})))),this.loadCurrencyPairsRates$=(0,d.GW)(()=>this.actions$.pipe((0,d.l4)(h),(0,st.z)(({pairs:s})=>this.cartService.loadCurrencyPairsRates(s).pipe((0,P.U)(u=>U({currencyPairsRates:u}))))))}createProduct(r,c){return Object.assign(Object.assign({},r),{uuid:(0,at.x0)(),name:"Product name "+(c+1),image:"https://picsum.photos/id/"+10*c+"/200/200",createdAt:(new Date).toISOString()})}}return t.\u0275fac=function(r){return new(r||t)(e.LFG(d.eX),e.LFG($))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac}),t})(),lt=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({providers:[],imports:[[]]}),t})(),pt=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[y.ez,lt,o.Aw.forFeature("cart",G),d.sQ.forFeature([ut]),A.WG]]}),t})();const yt=[{path:"",component:ct}];let dt=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.oAB({type:t,bootstrap:[it]}),t.\u0275inj=e.cJS({providers:[{provide:F,useValue:f.BASE_URL},{provide:C.TP,useClass:B,multi:!0}],imports:[[C.JF,m.b2,pt,o.Aw.forRoot({},{metaReducers:[],runtimeChecks:{strictStateImmutability:!0,strictActionImmutability:!0,strictActionWithinNgZone:!0,strictActionTypeUniqueness:!0}}),d.sQ.forRoot([]),f.production?[]:ot.FT.instrument({maxAge:300}),S.Bz.forRoot(yt)]]}),t})();f.production&&(0,e.G48)(),m.q6().bootstrapModule(dt).catch(t=>console.error(t))}},g=>{g.O(0,["vendor"],()=>g(g.s=7398)),g.O()}]);